<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>{{ title | d('Lab Page')}}</title>
    {% block stylesheets %}
    <link rel="stylesheet" href="/global.css">
    {% endblock %}
    {% include '_favicon.njk' %}
    <script nomodule>/*@cc_on document.write('\x3Cscript id="_iealwn_js" src="vendor/old-ie-warn.js">\x3C/script>'); @*/</script>
  </head>
  <body>
    <main id="app"></main>
    <script>
      import("./esm/{{ entry }}.js")
      window.supportsDynamicImport = true
    </script>
    <script nomodule src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,fetch&flags=gated"></script>
    <script>
      if (!window.supportsDynamicImport) {
        var systemJsLoaderTag = document.createElement('script')
        systemJsLoaderTag.src = 'vendor/s.min.js'
        systemJsLoaderTag.addEventListener('load', function () {
          var sysModLoaderTag = document.createElement('script')
          sysModLoaderTag.setAttribute('type', 'module')
          sysModLoaderTag.innerHTML = "System.import('./sys/{{ entry }}.js')"
          document.body.appendChild(sysModLoaderTag)

          var legacyLoaderTag = document.createElement('script')
          legacyLoaderTag.setAttribute('nomodule', '')
          legacyLoaderTag.innerHTML = "System.import('./es5/{{ entry }}.js')"
          document.body.appendChild(legacyLoaderTag)
        })
        document.head.appendChild(systemJsLoaderTag)
      }
    </script>
  </body>
</html>
